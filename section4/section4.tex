\documentclass[class=article, crop=false, dvipdfmx]{standalone}
\input{../preamble}
\begin{document}

\section{Attitude Stabilization}
\renewcommand{\labelitemi}{---}
\begin{itemize}
\item 無制御（CubeSatなど）
\item 受動制御
	\begin{itemize}
    \item G.G.安定
    \item 磁気安定，沿磁力線制御
    \item スピン安定
    	\begin{itemize}
        \item Single Spin
        \item Double Spin
        \end{itemize}
    \end{itemize}
\item 能動制御
	\begin{itemize}
    \item Bias momentum
    \item zero momentum
    \end{itemize}
\end{itemize}
\renewcommand{\labelitemi}{\textbullet}


\subsection{Single Spin Stabilization}

\begin{wrapfigure}{l}{20zw}
\input{fig_column_with_axis}
\end{wrapfigure}

$y$をスピン軸，
Principal axisをbody frameとする.\\
外乱トルクがないとき
\begin{align}
I_{xx}\dot{\omega_x}&=(I_{yy}-I_{zz})w_yw_z\\
I_{yy}\dot{\omega_y}&=(I_{zz}-I_{xx})w_zw_x\\
I_{zz}\dot{\omega_z}&=(I_{xx}-I_{yy})w_xw_z
\end{align}
今，$\omega_y=\omega_s(\mbox{目標)}+\epsilon(\mbox{擾乱})\qquad |\epsilon| \ll 1$\\
$|\omega_x|，|\omega_z| \ll 1$と仮定する.

\begin{align}
I_{xx}\dot{\omega_x} &= (I_{yy}-I_{zz})\omega_s\omega_z\\
I_{yy}\dot{\epsilon} &= 0 \\
I_{zz}\dot{\omega_z} &= (I_{xx}-I_{yy})\omega_s
\end{align}
以上の線形の運動方程式になる.


\noindent
\underline{Dynamics解析}
\begin{enumerate}[label=\theenumi)]
\item $y$軸 \qquad $\varepsilon = \mathrm{Const.}$
\item $x, z$軸 \quad Conplug $\rightarrow$ 
	\begin{align}
    I_{xx} \ddot{\omega_x} & = (I_{yy} - I_{zz})\omega_s \dot{\omega_z} \\
    		&= \frac{(I_{yy}-I_{zz})(I_{xx}-I_{yy})}{I_{zz}} {\omega_s}^2 \omega_x
    \end{align}
    ここで
    \[ a = \frac{(I_{yy}-I_{zz})(I_{xx}-I_{yy})}{I_{zz}} {\omega_s}^2 \]
    とおくと，
    \[ \ddot{\omega_x} + a\omega_x = 0 \]
    \[ \ddot{\omega_z} + a\omega_z = 0 \]
\end{enumerate}
安定(発散でない)のための必要条件は
\begin{equation}
a>0\Leftrightarrow I_{yy}>I_{xx},I_{zz}\quad or \quad I_{yy}
< I_{xx}, I_{zz}
\end{equation}
つまりy軸が慣性モーメントの最大軸か最小軸のとき.

\begin{minipage}{0.45\linewidth}
\input{fig_large_inertial_moment_column}
\end{minipage}
\begin{minipage}{0.3\linewidth}
\input{fig_small_inertial_moment_column}
\end{minipage}


\begin{equation}
if\quad a<0 \Rightarrow
\omega_x=
A\exp(\sqrt[]{-a}t)\rightarrow\infty
\end{equation}
$x$と$z$の連成振動\\
簡単のために$I_{xx} = I_{yy}=I_T,I_{yy}I_S$とおく.\\
\begin{align}
\omega_x&=A\sin(\lambda t-\phi)\\
\omega_z&=A\frac{|I_S-I_T|}{I_S-I_T}
\cos(\lambda t-\phi)\\
\lambda&=\sqrt[]{a}=\frac{|I_S-I_T|}{I_T}\omega_s\\
A,\phi&:\text{積分定数}
\end{align}
$\omega_x,\omega_z$は$90^\circ$位相ずれで振動.$\sqrt[]{\omega_x^2+\omega_z^2}=A=\mathrm{Const.}$の円運動\\


\noindent
（body系で見た場合）\\
\begin{center}
\begin{minipage}{0.45\linewidth}
\input{fig_omega_from_body_from_above}
\end{minipage}
\hspace{3zw}
\begin{minipage}{0.45\linewidth}
\input{fig_omega_from_body_from_side}
\end{minipage}
\end{center}
\vspace{\baselineskip}

\noindent
(外からみると)\\
\begin{center}
\input{fig_omega_from_outside}
\end{center}

\begin{itemize}
\item $\bm{H}$とスピン軸の貼る平面内いつも
$\bm{\omega}$がある.
\item 衛星は$\bm{\omega}$を中心に回る.
\end{itemize}
慣性系においてy(スピン軸)は$\bm{H}$の軸周りに回転する.
これを``Nutation運動''と呼ぶ.

\begin{minipage}{0.45\linewidth}
(1)$I_S<I_T$のとき

\input{fig_corns_touching_outside}
\vspace{6mm}

space coneに外接してbody coneが回転.
\end{minipage}
\hfill
\begin{minipage}{0.45\linewidth}
(2)$I_S>I_T$のとき

\input{fig_corns_touching_inside}

space coneに内接しながらbody coneが回転.
\end{minipage}
\vspace{\baselineskip}

いずれの場合も回転速度は$\frac{H}{I_T}$
\\

\noindent
$<$dissipation(エネルギー散逸)\footnote{スロッシング,摩擦,SAP}がある場合$>$\\
$\theta$が一定にならない.
\begin{align}
T&=\frac{1}{2}(I_T{\omega_T}^2+I_S{\omega_S}^2)
\qquad \text{減少する}
\label{T}\\
H^2&=
{I_T}^2+{\omega_T}^2+{I_S}^2+{\omega_S}^2\qquad
\text{外力が働らかなければ一定}
\label{H}\\
\sin\theta&=\frac{I_T \omega_T}{H}\rightarrow
\sin^2\theta=\frac{{I_T}^2{\omega_T}^2}
{H^2}=\frac{I_T}{(I_S-I_T)H^2}(2I_ST-H)
\end{align}
時間微分すると
\begin{align}
2\sin\theta \cos\theta \cdot \dot{\theta}&=
\frac{I_T}{(I_S-I_T)H^2}2I_S\dot{Y}\\
\therefore\qquad \dot{\theta}&=
\frac{2I_SI_T\dot{T}}{\sin2\theta(I_S-I_T)H^2}\\
&=\frac{2I_SI_T\dot{T}}{\sin2\theta(I_S-I_T)H^2}
\end{align}
エネルギー散逸があるので$\dot{T}<0$\\
よって$I_S>I_T$である必要がある.
つまりスピン軸周りの$I$が最大(平らな円筒形)

\begin{center}
\input{fig_rounding_column}
\end{center}


\noindent
・定性的な解釈\\
\[ T=\frac{H^2}{2I_{SS}} \qquad I_{SS}\text{:各瞬間ごとのスピン軸周りの慣性モーメント} \]
($\because T=\frac{1}{2}I_{SS}\omega_{ss}^2$)\\
$H$:一定，$T$が減る.\\
\qquad $T$はどこまで小さくできるか?\\
$\rightarrow$ $I_{SS}$が最大となると$T$最小\\
$\rightarrow$ 最後は$I$最大の軸周りの回転に落ち着く\\
$I_S>I_T$が成り立つとき，$|\dot{T}|$を大きくすれば$|\theta|$は0に戻りやすい.
$\rightarrow$エネルギー散逸を起こしてやればいい.
\begin{enumerate}
\item Nutation damper
\begin{center}
\input{fig_circular_tube}
\end{center}

\item Activeな姿勢制御をする
\begin{itemize}
\item スラスタ(Active Nutation Control)
\item MTQ(磁気トルカー)
\end{itemize}
\end{enumerate}



\subsection{Dual Spin Stabilization}
\begin{itemize}
\item 非回転: platform---スピン軸周り$I_{SP}$
\item 回転 : rotar---スピン軸周り$I_{SR}$
\end{itemize}

全体のスピン軸に垂直な軸周り$I_T$

\input{fig_dual_spin}
\begin{align}
 T&=
 \frac{1}{2}
(I_T\omega_{T}^2
+I_{SP}\omega_{R}^2
+I_{SR}\omega_{R}^2)
\label{eq:4_1}\\
 H^2 &=
 I_T^2\omega_{T}^2
+(I_{SP}\omega_{P}
+I_{SR}\omega_{R})^2
\label{eq:4_2}\\
\text{ここで}\omega&
\equiv\frac{I_{SP}\omega_P
+I_{SR}\omega_{R}}{I_T}
\qquad \text{(Nutation角周数)}
\label{eq:4_3}
\end{align}
~\eqref{eq:4_2}を微分すると,$\dot{H}=0$より,
\begin{align}
  I_T^2\omega_T\dot{\omega_T} +
  (I_{SP}\omega{P}+I_{SR}\omega_{R})
  (I_{SP}\dot{\omega_{P}}+
 \Leftarrow I_{SR}\dot{\omega_{R}})=0 \\
  I_T\omega_{T}\dot{\omega_{T}} =
  -\omega_{n}(I_{SP}\dot{\omega_{P}}
  +  I_{SR}\dot{\omega_{R}}) \label{eq:4_4}
\end{align}
~\eqref{eq:4_1}を微分すると,
\begin{align}
\dot{T}&=
I_T\omega_T \dot{\omega{T}} +
I_{SP}\omega_{P}\dot{\omega_{P}}+
I_{SR}\omega_{R}\dot{\omega_{R}}
\label{eq:4_5}\\
\end{align}
\text{~\eqref{eq:4_4}を代入}
\begin{align}
\dot{T}&= 
-I_{SP}(\omega_{n}\omega_{p})
\dot{\omega_{p}}
- I_{SR}(\omega_{n}\omega_{R})
\dot{\omega_{R}}\label{eq:4_6}\\
\end{align}
ここで
$\lambda\equiv\omega_n-\omega_P$,
\qquad$\lambda\equiv\omega_n-\omega_R$
と置くと,
\begin{align}
\dot{T}&=
-I_{SP}\lambda_p \dot{\omega_P} - 
I_{SR}\lambda_R \dot{\omega_R}\\
 &= \dot{T_P}+ \dot{T_R}
\end{align}
\begin{empheq}[left=\empheqlbrace]{align}
 \dot{T_P}=
 -I_{SP}\lambda_P \omega_{P}\label{eq:4_7} \\
  \dot{T_R}= 
  -I_{SR}\lambda_R\omega_{R}\label{eq:4_8}
\end{empheq}
~\eqref{eq:4_7}~\eqref{eq:4_8}
$\Rightarrow$~\eqref{eq:4_4}
\begin{equation}
I_T \omega_T \dot{\omega_T} = \omega_n(
\frac{\dot{T_P}}{\lambda_P} + 
\frac{\dot{T_R}}{\lambda_R})\label{eq:4_9}
\end{equation}
$\sin{\theta}^2=
\frac{I_T^2 \omega_{T}^2}{H^2}$より
\begin{align}
2\sin{\theta}\cos{\theta}\dot{\theta}=
\frac{2I_T^2 \omega_T \dot{\omega_T}}{H^2}
=\frac{2I_T\omega_n (\frac{\dot{T_P}}{\lambda_P} + 
\frac{\dot{T_R}}{\lambda_R})}{H^2}\\
\therefore \dot{\theta}
= \frac{2I_T \omega_n}{\sin{2\theta}H^2}
\underline
{(\frac{\dot{T_P}}{\lambda_P} + 
\frac{\dot{T_R}}{\lambda_R}
)}\\
\text{安定化のためには}
\qquad\frac{\dot{T_P}}{\lambda_P}
+ \frac{\dot{T_R}}{\lambda_R}
<0\label{eq:4_11}
\end{align}
仮定:$|\omega_p|\ll|\omega_R|,|\omega_T|\ll|\omega_R|$
(ほとんどローター側のみスピン)
\begin{equation}
\lambda_P = \omega_n - \omega_P = \frac{(I_{sp} - I_T)\omega_P + I_{SR} \omega_R}{I_T}
	\fallingdotseq \frac{I_{SR}}{I_T} \omega_R
    \label{eq:lambdaP}
\end{equation}
\begin{equation}
\lambda_R = \omega_n - \omega_R = \frac{I_{sp} \omega_P + (I_{SR} - I_T) \omega_R}{I_T}
	\fallingdotseq \qty(\frac{I_{SR}}{I_T} - 1) \omega_R
    \label{eq:lambdaR}
\end{equation}
~\eqref{eq:lambdaP}，~\eqref{eq:lambdaR}$\rightarrow$ ~\eqref{eq:4_11}に代入して，
\begin{equation}
\underexpl{\dfrac{\dot{T}_P}{I_{SR}/I_T}}{\textcolor{darkgreen}{<0}} + \dfrac{\dot{T}_R}{I_{SR}/I_T - 1} < 0
\label{eq:Tdot-relation}
\end{equation}
\begin{itemize}
\item [Case1] $I_{SR}>I_T\Rightarrow$必ず安定
\item [Case2] $I_{SR}<I_{T}
\Rightarrow|\dot{T}_p|>|\dot{T}_R|
\frac{\frac{I_{SR}}{I_T}}{1-\frac{I_{SR}}{I_T}}$なら安定
\end{itemize}
例)
$\frac{I_{SR}}{I_T}=\frac{2}{3}$の時
\qquad
$|\dot{T}_p|>2|\dot{T}_R|$で安定\\
$\rightarrow$プラットフォームでのエネルギー散逸を大きくする\\
($\Rightarrow$ニューテーションダンパーをプラットフォームに乗せるなど)\\
なぜ大事か$\rightarrow$設計自由度を増やす\\

\input{fig_columnPR}
INTELSAT-IV%\Roman{4}

\begin{itemize}
\item $I_{SR}<I_T$でもOK
\item 細長いスピン衛星でもOK$\rightarrow$
フェアリングに入りやすい
\end{itemize}

%\input{fig_Euler_method_graph}


\subsection{Bias Momentum方式}
\qquad ---ジャイロ剛性を得るためのホイールを中に持つ

\begin{itemize}
\item Fixed Momentum Wheel：$y$軸（慣性空間で一定方向）
\item Activeに制御するトルク
	\begin{itemize}
    \item $y$軸周り：ホイールの角速度を変える
    \item $x, z$軸：スラスター，磁気トルカーなど
    \end{itemize}
\end{itemize}

\input{fig_cube_with_axis}

$\cdot$ 内部角運動量
\begin{empheq}[left=\empheqlbrace]{align}
h_x&=0\\
h_y&=-I_{\omega}\Omega=-h\\
h_z&=0
\end{empheq}
\begin{itemize}
\item [$I_{\omega}$:]
ホイールの慣性モーメント
\item [$\Omega$:]
ホイールの角速度
\end{itemize}

\begin{equation}
  \bm{\omega}^b = 
 \begin{bmatrix}
  \omega_x\\
  \omega_y\\
  \omega_z
  \end{bmatrix}
=
\begin{bmatrix}
  \dot{\Phi}-\omega_o \Psi \\
  \dot{\theta} -\omega_o\\
  \dot{\Psi} -\omega_o\Phi
 \end{bmatrix}
\end{equation}
\begin{itemize}
\item [$\phi,\theta,\psi$]
orbital frameからのずれ
\item [$\omega_0$]
地球指向のための角速度
(円軌道$\rightarrow$軌道角速度)
\end{itemize}

\begin{align}
\bm{H}^b&=
\bm{H}_b^b \bm{H}_w^b\\
 &=
 \begin{bmatrix}
 I_{xx}\omega_x\\
  I_{yy}\omega_y\\
   I_{zz}\omega_z
 \end{bmatrix}
 +
 \begin{bmatrix}
 h_x\\
 h_y\\
 h_z
 \end{bmatrix}
=
\begin{bmatrix}
I_{xx}(\dot{\Phi}-\omega_o\Psi)\\
I_{yy}(\dot{\theta}-\omega_o)-h\\
I_{zz}(\dot{\Psi}+\omega_o) \Phi
\end{bmatrix}
\end{align}

\begin{align}
\bm{M}^b&=
\dot{\bm{H_{rel}^b}} +
\dot{\omega}^b \times \dot{H}^b\\
&=
\begin{bmatrix}
I_{xx}(\ddot{\Phi} -\omega_o\dot{\psi}) + 
%h(\dot{\s})
\end{bmatrix}
\end{align}


\begin{enumerate}[label=仮定\maru{\theenumi}]
\item
\begin{equation}
h \ll \omega_0 I_{xx}, \ \omega_0 I_{yy}, \ \omega_0 I_{zz}
\end{equation}
$\dot{\theta}, \dot{\psi}, \dot{\phi}$が小さい

\item
Gravity Gradient Torqueはあらかじめ含めておく
\begin{equation}
\bm{M}_q = 
	\begin{bmatrix}
    3 {\omega_0}^2 (I_{zz} - I_{yy}) \phi \\
    3 {\omega_0}^2 (I_{zz} - I_{xx}) \theta \\
    0
    \end{bmatrix}
\end{equation}
\begin{align}
\rightarrow
& M_x = I_{xx} \ddot{\phi} + \omega_0 h \phi + h \dot{\psi} \\
& M_y = I_{yy} \ddot{\theta} + 3{\omega_0}^2 \theta (I_{zz} - I_{xx}) + \dot{h} \\
& M_z = I_{zz} \ddot{\psi} + \omega_0 h \psi - h \dot{\theta}
\end{align}
\end{enumerate}
特徴
\begin{enumerate}[label=\theenumi)]
\item ピッチ軸周り$\rightarrow$独立
\item ロール,ヨー軸周り$\rightarrow$hを介してカップリング
している
\end{enumerate}
制御を考える
\begin{enumerate}[label=(\theenumi)]%IV%IV
\item　ピッチ軸:hを使ってコントロールする
(ホイールの回転速度を変化させる)\\
Simple Caseとして$I_{xx}=I_{yy}$とする\\
$\rightarrow M_y=I_{yy}\ddot{\theta}-\dot{h}$
\end{enumerate}
制御則の例
\begin{equation}
\dot{h}=-K_{\theta}(\tau_{\theta}\dot{\theta}+\theta)
\qquad(\text{PD制御})
\end{equation}
これを代入すると,閉ループ系は,二次系(バネ+ダンパー系)となる.
\begin{align}
M_y
&=
I_{yy}\ddot{\theta}+
K_{\theta}\tau_{\theta}\dot{\theta}+K_{\theta}\theta
\\
&=
I_{yy}
(\ddot{\theta}+
2\xi_{\theta}\omega_{\theta}\dot{\theta}
+\omega^2_{\theta}\theta)
\end{align}
\begin{equation}
\text{ここで}
\qquad
\omega_{\theta}=
\sqrt[]{\frac{K_{\theta}}{I_{yy}}}\quad
(\text{固有周波数}),
\xi_{\theta}=
\frac{\tau_{\theta}}{2}
\sqrt[]{\frac{K_{\theta}}{I_{yy}}}
\quad( \text{減衰係数})
\end{equation}
\input{fig_block_board}\\		%ブロック線図 
閉ループ伝達関数
$
H(s)=G(s)K(s)=
\frac{K_{\theta}(\tau_{\theta}s+1)}{I_{yy}s^2}
$

\input{fig_root_focus}
\input{fig_decay_graph_1}	%減衰するグラフその1
\begin{enumerate}[label=\maru{\theenumi}]
\item little damping
\item over damping
\footnote{little dampingとover dampingどちらが
良いのかはミッション次第}
\item critically damped system　(臨界減衰)\\
$\rightarrow$一般的にはこれを目指す.
\end{enumerate}
臨界減衰であるためには,
\begin{equation}
(K_{\theta}\tau_{\theta})^2
-4K_{\theta}I_{yy}=0\qquad
\therefore
\tau_{\theta}=2
\sqrt[]{\frac{I_{yy}}{K_{\theta}}}
\end{equation}
この時の系の挙動
\begin{align}
\frac{\theta(s)}{M_{y}(s)}&=\frac{G}{1+GK}\\
&=
\frac{1}
{I_{yy}s^2+K_{\theta}\tau_{\theta}s+K_{\theta}}\\
&=
\frac{1}{I_{yy}(s+\frac{1}{\tau})^2}
\end{align}

\begin{align}
\frac{\theta (s)}{\theta_{ref} (s)}
= \frac{GK}{1+GK}
&= \frac{2 \sqrt{K_{\theta} I_{yy}}(s+\frac{1}{2\tau})}
{I_{yy}(s+\frac{1}{\tau})^2}\\
&=\frac{2(s+\frac{1}{2\tau})}{\tau (s+\frac{1}{\tau})^2}
=\frac{2}{\tau (s+\frac{1}{\tau})}
-\frac{1}{\tau^2 (s+\frac{1}{\tau})^2}
\end{align}

%%%% 誰か配置して %%%%
外乱トルクが入ったときの$\theta$の挙動
\begin{enumerate}
\item{インパルス状(デブリの衝突,thrusterのmisfireなど}
\begin{align}
M_y(s) &= M_0 (M_y(t) = M_0 \delta(t))\\
\rightarrow 
\theta(s) &= \frac{M_0}{I_{yy}}
\frac{1}{(s+\frac{1}{\tau})^2}\\
\therefore 
\theta(t) &= \frac{M_0}{I_{yy}} 
t
\exp(-\frac{1}{\tau} t)\\
\theta_{max} &= \frac{M_0}{I_{yy}}\tau \exp(-1) 
<\mbox{許容範囲}\\
\mbox{になるように}\tau\mbox{を決める.}
\end{align}
\input{fig_updown}			%極値の後0に収束するグラフ
\item{sin状(太陽輻射圧など)}
\begin{equation}
M_y=M_0 \cos(\omega_0 t)
\end{equation}
定常状態では
\begin{align}
\theta &= \theta_{max} \cos(\omega_0 t - \Psi_0)\\
\theta_{max} &= \frac{M_0 \tau^2}{I_{yy}}
\frac{1}
{\sqrt{(1-\tau^2 \omega_0)^2
+(2\tau \omega_0)^2}}\\
\Psi_0 &= \arctan(\frac{2\tau \omega_0}{1- \tau^2 \omega_0^2})
\end{align}
通常,
$\tau \omega_0<< 1\rightarrow$
$\theta_{max} = \frac{M_0 \tau^2}{I_{yy}} = \frac{M_{\theta}}{K_\theta}$
\input{fig_goto_static_graph.tex}	%ステップの後定常状態になるグラフ
\end{enumerate}
もう一つの要求(制約条件):Momentum wheelの角速度
\begin{align}
\dot{h}&=
I_{\omega}\dot{\Omega}=
-K_\theta (\tau_\theta \dot{\theta} + \theta)\\
\therefore \quad \Omega (s)&=
-\frac{K_\theta}{I_\omega s}(\tau_\theta s+1)
\theta (s)+\frac{\Omega_0}{s}
\qquad \Omega_0\text{初期値}\\
\therefore \Omega (s)&=
-\frac{2\tau s}{I_w s(\tau s+1)^2}
M_y(s)+\frac{\Omega_0}{s}
\end{align}
\begin{enumerate}
\item 外乱がインパルス状: $M_y(s) = M_0$\\
\begin{align}
\rightarrow \Omega(t) = -
\frac{M_0}{I_w}(1 + 
(\frac{t}{\tau} - )\exp(-\frac{t}{\tau}) + \Omega_0\\
t\rightarrow \infty
\underexpl{\Omega_{ss}}{\textcolor{darkgreen}{}} = -\frac{M_0}{I_w} + \Omega_0
\end{align}

\end{enumerate}
\end{document}