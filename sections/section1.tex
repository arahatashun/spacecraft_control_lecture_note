\documentclass[class=article, crop=false, preview=false, dvipdfmx, a4paper]{standalone}
\input{../preamble}
\begin{document}

\section{姿勢の表現方法}

\subsection{Direction Cosine Matrix(DCM)}
　宇宙機に固定された座標系が慣性系に対してどっちを向いているか？$\Rightarrow$座標変換\\
 $\therefore$直交座標系の間の変換行列として定義
\begin{enumerate}[label = \maru{\theenumi}]
 \item Body Frame 衛星にくくりつけられた座標系、変動する 
 \item Inertial Frame 固定
 \end{enumerate}
 上付き文字のiはInertial,bはBodyの意味
 \[ \mathbbmtt{x^i}=C^i_b\mathbbmtt{x^b} \]
 $C^i_b$は姿勢の表現と考える
 \[ \mathbbmtt{x^b} = C^b_i \mathbbmtt{x^i} = \underbrace{C^b_i C^i_b}_{\mathbb{I}} \mathbbmtt{x^b} = \mathbb{I} \mathbbmtt{x^b}
 	\rightarrow {C^i_b}^{-1} = C^b_i \]

\begin{tabular}{ll}
i-frameの3つの基底ベクトル & $\mathbbmtt{i_1}$,$\mathbbmtt{i_2}$,$\mathbbmtt{i_3}$ \\
b-frameの3つの基底ベクトル & $\mathbbmtt{b_1}$,$\mathbbmtt{b_2}$,$\mathbbmtt{b_3}$
\end{tabular}

$\mathbbmtt{x^i}=
 	\begin{pmatrix}
    	x^i_1\\
        x^i_2\\
        x^i_3\\
    \end{pmatrix}$
とすると
\begin{equation}
\mathbbmtt{x} = \sum_{k=1}^{3} x^i_k \mathbbmtt{i_k} \label{eq:1}
\end{equation}

一方で
$\mathbbmtt{x^b}=
    \begin{pmatrix}
    	x^b_1\\
        x^b_2\\
        x^b_3\\
    \end{pmatrix}$
とすると
\begin{equation}
\mathbbmtt{x} = \sum_{k=1}^{3} x^b_k \mathbbmtt{b_k}  \label{eq:2}
\end{equation}
\eqref{eq:1}と\eqref{eq:2}は同じ.(2)式の両辺に$\mathbbmtt{i_1}$をかけて内積をとると
\[ x^i_1 =
	\left(
		\mathbbmtt{i_1} \cdot \mathbbmtt{b_1},
        \mathbbmtt{i_1} \cdot \mathbbmtt{b_2},
        \mathbbmtt{i_1} \cdot \mathbbmtt{b_3}
    \right)
	\begin{pmatrix}
    	x^b_1\\
        x^b_2\\
        x^b_3\\
    \end{pmatrix}
\]
$x^i_2, x^i_3$も同様にして
\[
\begin{pmatrix}
	x^i_1\\
    x^i_2\\
    x^i_3\\
\end{pmatrix}
=
\begin{pmatrix}
	\mathbbmtt{i_1} \cdot \mathbbmtt{b_1} & 
    \mathbbmtt{i_1} \cdot \mathbbmtt{b_2} & 
    \mathbbmtt{i_1} \cdot \mathbbmtt{b_3} \\
    \mathbbmtt{i_2} \cdot \mathbbmtt{b_1} &
    \mathbbmtt{i_2} \cdot \mathbbmtt{b_2} &
    \mathbbmtt{i_2} \cdot \mathbbmtt{b_3} \\
    \mathbbmtt{i_3} \cdot \mathbbmtt{b_1} & 
    \mathbbmtt{i_3} \cdot \mathbbmtt{b_2} & 
    \mathbbmtt{i_3} \cdot \mathbbmtt{b_3}
\end{pmatrix}
\begin{pmatrix}
	x^b_1\\
    x^b_2\\
    x^b_3\\
\end{pmatrix}
\]
つまり
\[ \mathbbmtt{x^i} = C^i_b\mathbbmtt{x^b} \]
また
\begin{align}
C_b^{i\mathrm{T}} & = C_i^b \\
C_b^{i-1} & = C^b_i
\end{align}
となるので$C_b^i$はUnitary行列


\subsubsection{DCMの求め方}
\begin{enumerate}[label = \maru{\theenumi}]
\item スタートラッカーにより星を観測する\\
$\rightarrow$3つの星からb-frameの$\mathbbmtt{s^b_1},\mathbbmtt{s^b_2},\mathbbmtt{s^b_3}$がもとまる.(単位ベクトル)
\item この3つの星が天球上のどの星かを同定する(pattern matching,identification)\\
$\rightarrow\mathbbmtt{s^i_1},\mathbbmtt{s^i_2},\mathbbmtt{s^i_3}$がもとまる.
\hfil
\begin{minipage}{2.3cm}
\begin{figure}[H]
\tikz{%
	\draw (0, 0) rectangle (2, 1);
    \draw [->] (1, 0.7)node[fill=white]{$\star$}
    	to[bend right] (0.6, 0.3)node[fill=white]{$\star$}
        to[bend right] (1.4, 0.3)node[fill=white]{$\star$}
        to[bend right] (1, 0.7);
    }
\end{figure}
\end{minipage}
明るさの離角
\end{enumerate}

以上から
\begin{align}
\begin{pmatrix}
	\mathbbmtt{s^i_1}, & \mathbbmtt{s^i_2}, & \mathbbmtt{s^i_3}
\end{pmatrix}
& = 
C^i_b
\begin{pmatrix}
	\mathbbmtt{s^i_1},\mathbbmtt{s^i_2},\mathbbmtt{s^i_3}
\end{pmatrix}
\\
\rightarrow 
C^i_b & = 
\begin{pmatrix}
\mathbbmtt{s^i_1}, & \mathbbmtt{s^i_2}, & \mathbbmtt{s^i_3}
\end{pmatrix}
\left( \mathbbmtt{s^i_1},\mathbbmtt{s^i_2},\mathbbmtt{s^i_3} \right)^{-1}\mbox{注：独立なので逆行列が存在}
\end{align}
(参考)\\
$\mathbbmtt{x^i_1}$には2個の情報がある$\rightarrow$2個の星があれば姿勢(3自由度)がわかるはず.


\subsection{DCMの微分方程式(DCMの時間変化と角速度の関係、キネマティクス)}
\ding{"E2} 基本式\\
\text{*}$\cdots$回転座標系から見た変化\\
$\mathbbmtt{\omega}\cdots$回転角速度(bのiに対する)
\[ \frac{d\mathbbmtt{x}}{dt}=\frac{d^*\mathbbmtt{x}}{dt}+\mathbbmtt{\omega}\times\mathbbmtt{x} \]

\begin{enumerate}[label = \maru{\theenumi}]
\item $\mathbbmtt{x}$として回転座標系に固定したベクトルを使う
\begin{align}
\frac{d^*}{dt}\mathbbmtt{x} & = \mathbbmtt{0} \\
\frac{d\mathbbmtt{x^i} }{dt}& = \mathbbmtt{0}+ \mathbbmtt{\omega^i}\times \mathbbmtt{x^i} 
\end{align}
$\mathbbmtt{x^i}  = c^i_b \mathbbmtt{x^b}$を代入すると
\begin{align*}
\dot{c^i_b} \mathbbmtt{x^i} + C^i_b \overbrace{\dot{\mathbbmtt{x^b}}}^
{\mathbbmtt{x}\text{は固定されているので}\mathbbmtt{0}}
	& =\mathbbmtt{\omega^i} \times (c^i_b \mathbbmtt{x^b}) \\
	& = [\mathbbmtt{\omega^i} \times] c^i_b \mathbbmtt{x^b} \\
   \mathbbmtt{\omega^i} \times
	& \equiv
    \begin{pmatrix}
      0 & -\omega_3 & \omega_2 \\
      \omega_3 & 0 & -\omega_1 \\ 
      -\omega_2 & \omega_1 & 0
    \end{pmatrix}
    \text{skew synmetiric form of }\omega
\end{align*}
\begin{equation}
\therefore \dot{c^i_b\mathbbmtt x^b} = [\mathbbmtt \omega^i \times]c^i_b \mathbbmtt x^b
\end{equation}
これが任意の$\mathbbmtt x^b$について成り立つので,
\begin{equation}
\dot{c^i_b} = [\mathbbmtt \omega \times] c^i_b
\end{equation}

\item $\mathbbmtt{x}$として慣性系に固定されたベクトルを使う(i-frameにfix)
\[ \mathbbmtt{0} = \frac{d^*x}{dt} + \mathbbmtt{\omega} \times \mathbbmtt{x} \]
\[\therefore \dot{\mathbbmtt{x^b}} + \mathbbmtt{\omega^b} \times \mathbbmtt{x}^b = \mathbbmtt{0} \]
一方,$\mathbbmtt{x^i}=C^i_b\mathbbmtt{x^b}$より
\begin{align}
\dot{\mathbbmtt{x^i}}&=\dot{C^i_b}\mathbbmtt{x^b}+C^i_b\dot{\mathbbmtt{x^b}}
=\mathbbmtt{0} \quad \left(\mathbbmtt{x}\text{はiframeにfix}\right)\\
\therefore \dot{C^i_b}\mathbbmtt{x}^b&=-C^i_b\mathbbmtt{x}^b\\
&=-C^i_b\left(- \mathbbmtt{\omega^b} \times \mathbbmtt{x}^b\right)\\
&=C^i_b[\mathbbmtt{\omega^b} \times] \mathbbmtt{x}^b\\
\rightarrow \dot{C^i_b}&=C^i_b[\mathbbmtt{\omega^b}\times]
\end{align}

(補足)　IRU系での姿勢の計算\\
IRU$\rightarrow$
Inertial Reference Unit
$=$ジャイロを使って姿勢角、角速度を知るシステム
%%% footnoteは数式モード中では使えない。どうしよう。
%underbraceしました
\[
C^i_b\left(t\right)
\xrightarrow[\underbrace{\mathbbmtt{w}^b \ \text{or} \ \mathbbmtt{w}^i }_{\text{ジャイロから得られる}}]{\dot{C^i_b} = \cdots \text{の式}}
C^i_b \left( t + \delta t \right)
\quad\quad
\delta t = \SI{10}{ms}, \SI{1}{ms}
\]
ルンゲクッタ法などを用いて数値積分を行う
\end{enumerate}

\end{document}